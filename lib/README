
# Libraries Directory

This directory contains **project-specific modular libraries** for the ESP32 LED Matrix Clock.

## Modular Architecture

This project implements a **professional modular architecture** with separated concerns:


### ğŸ“ **Current Libraries**

#### **`AppStateManager/`**
- **Purpose**: Centralized application state management
- **Files**: `AppStateManager.h`, `AppStateManager.cpp`
- **Responsibilities**: Global state tracking, mode management

#### **`ButtonManager/`**
- **Purpose**: Input handling with advanced debouncing
- **Files**: `ButtonManager.h`, `ButtonManager.cpp`
- **Features**: Button debouncing, repeat functionality, state management

#### **`ClockDisplay/`**
- **Purpose**: Time rendering and formatting system
- **Files**: `ClockDisplay.h`, `ClockDisplay.cpp`
- **Features**: 12/24 hour conversion, text sizing, AM/PM handling

#### **`EffectsEngine/`**
- **Purpose**: Background animation and particle systems
- **Files**: `EffectsEngine.h`, `EffectsEngine.cpp`
- **Effects**: Confetti, Matrix Rain, Weather, Stars, Sparkles, Fireworks

#### **`MatrixDisplayManager/`**
- **Purpose**: Hardware abstraction for HUB75 LED matrix
- **Files**: `MatrixDisplayManager.h`, `MatrixDisplayManager.cpp`
- **Features**: Display control, brightness management, text masking

#### **`MenuSystem/`**
- **Purpose**: Navigation and configuration interface (now with NTP sync, WiFi, and OTA integration)
- **Files**: `MenuSystem.h`, `MenuSystem.cpp`
- **Features**: Menu navigation, live preview, user interface, NTP sync request, WiFi/OTA setup

#### **`SettingsManager/`**
- **Purpose**: Persistent configuration storage
- **Files**: `SettingsManager.h`, `SettingsManager.cpp`
- **Features**: EEPROM-backed settings, WiFi credentials, effect and time preferences

#### **`SystemManager/`**
- **Purpose**: System-level coordination, including NTP sync and OTA update handling
- **Files**: `SystemManager.h`, `SystemManager.cpp`
- **Features**: Main loop integration, NTP/OTA priority handling

#### **`TimeManager/`**
- **Purpose**: RTC, NTP, timezone, and DST management
- **Files**: `TimeManager.h`, `TimeManager.cpp`
- **Features**: Non-blocking NTP sync, timezone/DST logic, RTC/NTP bridging

#### **`WiFiManager/`**
- **Purpose**: WiFi connection, credentials, and OTA update logic
- **Files**: `WiFiManager.h`, `WiFiManager.cpp`
- **Features**: WiFi setup, OTA update, connection status

#### **`WiFiInfoDisplay/`**
- **Purpose**: WiFi status and information display
- **Files**: `WiFiInfoDisplay.h`, `WiFiInfoDisplay.cpp`
- **Features**: Display SSID, IP, connection state

#### **`SettingsManager/`**
- **Purpose**: Persistent configuration storage
- **Files**: `SettingsManager.h`, `SettingsManager.cpp`
- **Features**: EEPROM persistence, settings validation

## External Dependencies

Managed via `platformio.ini`:

- **`adafruit/Adafruit Protomatter@^1.6.4`** - RGB LED matrix driver
- **`adafruit/RTClib@^2.1.4`** - Real-time clock support
- **`wire`** - I2C communication

## Development Benefits

âœ… **Modular Design** - Each library has a single, well-defined purpose
âœ… **Code Reusability** - Libraries can be used in other ESP32 projects
âœ… **Easy Testing** - Individual modules can be unit tested independently
âœ… **Maintainability** - Clear separation makes debugging and updates easier
âœ… **Scalability** - New features can be added as separate libraries

```
lib/
â”œâ”€â”€ MatrixEffects/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ MatrixEffects.cpp
â”‚   â”‚   â””â”€â”€ MatrixEffects.h
â”‚   â””â”€â”€ library.json
â”œâ”€â”€ ClockUtilities/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ ClockUtilities.cpp
â”‚   â”‚   â””â”€â”€ ClockUtilities.h
â”‚   â””â”€â”€ library.json
â””â”€â”€ README (this file)
```

## Potential Custom Libraries

Consider creating these libraries for better code organization:

- **MatrixEffects** - Background effect system (confetti, rain, fireworks, etc.)
- **ClockUtilities** - Time formatting and display functions
- **MenuSystem** - Navigation and user interface components
- **ColorManager** - Color definitions and brightness control
- **ButtonHandler** - Input processing with debouncing

## Usage

Custom libraries are automatically detected and linked by PlatformIO's Library Dependency Finder.

For more information:
https://docs.platformio.org/page/librarymanager/ldf.html
